<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Star Collector</title>
<style>
body {
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: radial-gradient(circle at center, #000010, #000000);
    font-family: Arial, sans-serif;
    color: white;
    overflow: hidden;
}

/* Hern√≠ kontejner */
#game-wrapper {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
}

/* Score box vlevo */
#score {
    font-size: 32px;
    background: rgba(255,255,255,0.1);
    padding: 12px 16px;
    border-radius: 12px;
    margin-right: 20px;
    box-shadow: 0 0 15px #fff;
}

/* Hern√≠ pl√°tno */
#game-container {
    position: relative;
}

#game {
    display: grid;
    grid-template-columns: repeat(15, 60px);
    grid-template-rows: repeat(15, 60px);
    gap: 3px;
    background: rgba(0,0,0,0.8);
    padding: 15px;
    border-radius: 12px;
    box-shadow: 0 0 30px rgba(255,255,255,0.2);
}

.cell {
    width: 60px;
    height: 60px;
    background: radial-gradient(circle at center, #0a0a0a 0%, #000010 100%);
    border-radius: 8px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.cell img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 8px;
}

/* Modal Game Over */
#gameover-modal {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(20,20,30,0.95);
    padding: 30px 40px;
    border-radius: 16px;
    box-shadow: 0 0 20px #fff;
    text-align: center;
    z-index: 100;
}

#gameover-modal h2 {
    font-size: 28px;
    margin-bottom: 15px;
}

#gameover-modal button {
    font-size: 20px;
    padding: 8px 20px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: #ffcc00;
    color: #000;
}
</style>
</head>
<body>

<div id="game-wrapper">
    <div id="score">‚≠ê 0</div>
    <div id="game-container">
        <div id="game"></div>
    </div>
</div>

<div id="gameover-modal">
    <h2 id="gameover-text"></h2>
    <button onclick="restartGame()">Hr√°t znovu</button>
</div>

<script>
const gameSize = 15;
const game = document.getElementById("game");
const scoreEl = document.getElementById("score");
const modal = document.getElementById("gameover-modal");
const gameoverText = document.getElementById("gameover-text");

let player = { x: 7, y: 7 };
let star = randomPosition();
let hole = randomPosition(); // 1x1 pole
let direction = { x: 0, y: 0 };
let score = 0;

// Funkce pro n√°hodnou pozici
function randomPosition() {
    return {
        x: Math.floor(Math.random() * gameSize),
        y: Math.floor(Math.random() * gameSize)
    };
}

// Vykreslen√≠ hry
function drawGame() {
    game.innerHTML = '';
    for (let y=0; y<gameSize; y++) {
        for (let x=0; x<gameSize; x++) {
            const cell = document.createElement('div');
            cell.className = 'cell';

            if (x===player.x && y===player.y) {
                const img = document.createElement('img');
                img.src = '../static/player.png';
                img.alt = 'player';
                cell.appendChild(img);
            } else if (x===star.x && y===star.y) {
                const img = document.createElement('img');
                img.src = '../static/star.png';
                img.alt = 'star';
                cell.appendChild(img);
            } else if (x===hole.x && y===hole.y) {
                const img = document.createElement('img');
                img.src = '../static/hole.jpg';
                img.alt = 'hole';
                cell.appendChild(img);
            }

            game.appendChild(cell);
        }
    }
}

// Pohyb hr√°ƒçe
function movePlayer() {
    player.x += direction.x;
    player.y += direction.y;

    // Vyletƒõn√≠ z mapy
    if (player.x < 0 || player.x >= gameSize || player.y < 0 || player.y >= gameSize) {
        gameOver("üí´ Vyletƒõli jste hluboko do vesm√≠ru a u≈æ nen√≠ n√°vratu!");
        return;
    }

    // Kolize s ƒçernou d√≠rou
    if (player.x === hole.x && player.y === hole.y) {
        gameOver("‚ö´ Haha! ƒåern√° d√≠ra v√°s pohlt√≠ a u≈æ v√°s neuvid√≠ ani hvƒõzdy!");
        return;
    }

    // Sebran√≠ hvƒõzdy
    if (player.x === star.x && player.y === star.y) {
        score++;
        scoreEl.textContent = "‚≠ê " + score;
        star = randomPosition();
        hole = randomPosition();
    }

    drawGame();
}

// Konec hry
function gameOver(msg) {
    modal.style.display = 'block';
    gameoverText.textContent = msg;
    direction = { x:0, y:0 };
}

// Restart hry
function restartGame() {
    modal.style.display = 'none';
    player = { x:7, y:7 };
    star = randomPosition();
    hole = randomPosition();
    score = 0;
    scoreEl.textContent = "‚≠ê 0";
    drawGame();
}

// Ovl√°d√°n√≠ ≈°ipkami
document.addEventListener('keydown', (e)=>{
    if(e.key==='ArrowUp') direction={x:0, y:-1};
    if(e.key==='ArrowDown') direction={x:0, y:1};
    if(e.key==='ArrowLeft') direction={x:-1, y:0};
    if(e.key==='ArrowRight') direction={x:1, y:0};
});

// Inicializace
drawGame();
setInterval(movePlayer, 300);
</script>

</body>
</html>
