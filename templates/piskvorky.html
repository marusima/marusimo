<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barevný sběratel</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: linear-gradient(135deg, #ff6f61, #ffeb3b, #4caf50);
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        canvas {
            border: 5px solid #ffffff;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // Nastavení velikosti canvasu
    canvas.width = 800;
    canvas.height = 600;

    // Parametry hry
    const playerSize = 30;
    const objectSize = 20;
    const obstacleSize = 30;
    let player = { x: canvas.width / 2, y: canvas.height - playerSize, dx: 0, dy: 0, speed: 4 };
    let objects = [];
    let obstacles = [];
    let score = 0;
    let gameOver = false;

    // Funkce pro generování náhodné pozice
    function getRandomPosition(size) {
        return {
            x: Math.random() * (canvas.width - size),
            y: Math.random() * (canvas.height - size)
        };
    }

    // Funkce pro vykreslení hráče
    function drawPlayer() {
        ctx.fillStyle = "#ffeb3b";  // Žlutá barva pro hráče
        ctx.fillRect(player.x, player.y, playerSize, playerSize);
    }

    // Funkce pro vykreslení objektů
    function drawObjects() {
        ctx.fillStyle = "#4caf50";  // Zelené objekty
        objects.forEach(obj => {
            ctx.beginPath();
            ctx.arc(obj.x, obj.y, objectSize, 0, Math.PI * 2);
            ctx.fill();
        });
    }

    // Funkce pro vykreslení překážek
    function drawObstacles() {
        ctx.fillStyle = "#000";  // Černé překážky
        obstacles.forEach(obs => {
            ctx.fillRect(obs.x, obs.y, obstacleSize, obstacleSize);
        });
    }

    // Funkce pro detekci kolizí
    function checkCollisions() {
        // Kolize s objekty
        objects.forEach((obj, index) => {
            if (Math.abs(player.x - obj.x) < playerSize && Math.abs(player.y - obj.y) < playerSize) {
                score += 10;
                objects.splice(index, 1);  // Odebere objekt
            }
        });

        // Kolize s překážkami
        obstacles.forEach(obs => {
            if (Math.abs(player.x - obs.x) < playerSize && Math.abs(player.y - obs.y) < playerSize) {
                gameOver = true;
            }
        });
    }

    // Funkce pro pohyb hráče
    function movePlayer() {
        player.x += player.dx;
        player.y += player.dy;

        // Omezíme pohyb hráče, aby nevyjel mimo canvas
        if (player.x < 0) player.x = 0;
        if (player.x + playerSize > canvas.width) player.x = canvas.width - playerSize;
        if (player.y < 0) player.y = 0;
        if (player.y + playerSize > canvas.height) player.y = canvas.height - playerSize;
    }

    // Funkce pro generování nových objektů a překážek
    function generateObjectsAndObstacles() {
        if (Math.random() < 0.01) {
            objects.push(getRandomPosition(objectSize)); // Vytvoří nový objekt
        }
        if (Math.random() < 0.03) {
            obstacles.push(getRandomPosition(obstacleSize)); // Vytvoří novou překážku
        }
    }

    // Funkce pro vykreslení skóre
    function drawScore() {
        ctx.font = "30px Arial";
        ctx.fillStyle = "#ffffff";
        ctx.fillText("Skóre: " + score, 20, 40);
    }

    // Funkce pro vykreslení konce hry
    function gameOverScreen() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.7)";
        ctx.fillRect(0, canvas.height / 3, canvas.width, canvas.height / 3);
        ctx.fillStyle = "#ffeb3b";
        ctx.font = "40px Arial";
        ctx.fillText("Konec hry!", canvas.width / 2 - 100, canvas.height / 2);
        ctx.font = "30px Arial";
        ctx.fillText("Skóre: " + score, canvas.width / 2 - 70, canvas.height / 2 + 40);
    }

    // Funkce pro vykreslení celé hry
    function drawGame() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);  // Vyčistí canvas

        if (gameOver) {
            gameOverScreen();
        } else {
            movePlayer();
            generateObjectsAndObstacles();
            checkCollisions();
            drawPlayer();
            drawObjects();
            drawObstacles();
            drawScore();
        }

        requestAnimationFrame(drawGame);  // Opakuje vykreslení každým snímkem
    }

    // Ovládání hráče
    window.addEventListener("keydown", (e) => {
        if (e.key === "ArrowLeft") player.dx = -player.speed;
        if (e.key === "ArrowRight") player.dx = player.speed;
        if (e.key === "ArrowUp") player.dy = -player.speed;
        if (e.key === "ArrowDown") player.dy = player.speed;
    });

    window.addEventListener("keyup", (e) => {
        if (e.key === "ArrowLeft" || e.key === "ArrowRight") player.dx = 0;
        if (e.key === "ArrowUp" || e.key === "ArrowDown") player.dy = 0;
    });

    // Spustí hru
    drawGame();

</script>

</body>
</html>
